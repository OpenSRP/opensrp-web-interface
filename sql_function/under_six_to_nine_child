CREATE OR REPLACE FUNCTION core.under_six_to_nine_child (conditions varchar,startDate varchar,endDate varchar) 
RETURNS int
AS $$    
    DECLARE totalCount int:=0; 
    endDateCondition varchar := '';
    BEGIN      
    if (startDate != '' AND endDate != '') THEN            
		endDateCondition = E'\''||endDate || E'\'';
    ELSE   
        endDate = NOW();
        endDateCondition = E'\''||endDate || E'\'';
	END IF; 
     EXECUTE 'select count(*)
            FROM core."viewJsonDataConversionOfClient" c            
            WHERE c.event_type =' || E' \'Birth Registration\' and             
            (DATE_PART(' || E'\'day\','|| endDateCondition || '::timestamp - c.birth_date::timestamp)>181
                 and DATE_PART('|| E'\'day\','|| endDateCondition || '::timestamp - c.birth_date::timestamp)<271 )' || conditions  into totalCount ;
    return totalCount;
  END;
  $$ LANGUAGE 'plpgsql';